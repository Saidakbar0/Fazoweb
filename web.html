<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Ö–Ω–∏–∫ –•–∏–∑–º–∞—Ç</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: white;
            overflow-x: hidden;
        }
        
        .blur-background {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            position: relative;
        }
        
        .logo {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 50px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        nav a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }
        
        .btn {
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .btn-danger {
            background: linear-gradient(90deg, #ff416c, #ff4b2b);
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: repeat(17, 1fr);
            gap: 10px;
            margin-top: 30px;
        }
        
        .grid-item {
            aspect-ratio: 1/1;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .grid-item:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .user-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .user-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }
        
        .user-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-control {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            margin-top: 5px;
        }
        
        .form-control:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }
        
        .dashboard-card {
            padding: 30px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.4s ease;
            cursor: pointer;
            text-align: center;
        }
        
        .dashboard-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-10px);
        }
        
        .dashboard-card h2 {
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        .dashboard-card i {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 50px;
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        /* Login page styles */
        .login-container {
            max-width: 500px;
            margin: 100px auto;
        }
        
        /* Hidden pages */
        .page {
            display: none;
        }
        
        /* Active page */
        .page.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            nav ul {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">–¢–µ—Ö–Ω–∏–∫ –•–∏–∑–º–∞—Ç</div>
            <nav>
                <ul id="nav-menu">
                    <li><a href="#" onclick="showPage('login')">–ö–∏—Ä–∏—à</a></li>
                </ul>
            </nav>
        </header>
        
        <main>
            <!-- Login Page -->
            <div id="login" class="page active">
                <div class="blur-background login-container">
                    <h1 style="text-align: center; margin-bottom: 30px;">–¢–∏–∑–∏–º–≥–∞ –∫–∏—Ä–∏—à</h1>
                    
                    <form onsubmit="login(event)">
                        <div class="form-group">
                            <label for="username">–õ–æ–≥–∏–Ω</label>
                            <input type="text" class="form-control" id="username" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="password">–ü–∞—Ä–æ–ª</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        
                        <button type="submit" class="btn" style="width: 100%; margin-top: 20px;">–ö–∏—Ä–∏—à</button>
                    </form>
                </div>
            </div>
            
            <!-- Admin Dashboard -->
            <div id="admin-dashboard" class="page">
                <div class="blur-background">
                    <h1 style="text-align: center; margin-bottom: 30px;">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–∞–Ω–µ–ª–∏</h1>
                    <p style="text-align: center; margin-bottom: 40px; opacity: 0.8;">–•—É—à –∫–µ–ª–∏–±—Å–∏–∑, <span id="admin-username"></span>!</p>
                    
                    <div class="dashboard-cards">
                        <a href="#" onclick="showPage('user-list')">
                            <div class="dashboard-card">
                                <i>üë•</i>
                                <h2>–§–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏–ª–∞—Ä</h2>
                                <p>–ë–∞—Ä—á–∞ —Ñ–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏–ª–∞—Ä —Ä—û–π—Ö–∞—Ç–∏–Ω–∏ –∫—û—Ä–∏—à –≤–∞ –±–æ—à“õ–∞—Ä—É–≤</p>
                            </div>
                        </a>
                        
                        <a href="#" onclick="showPage('reports')">
                            <div class="dashboard-card">
                                <i>üìä</i>
                                <h2>–ö—É–Ω–ª–∏–∫ —Ö–∏—Å–æ–±–æ—Ç</h2>
                                <p>–û—Ö–∏—Ä–≥–∏ 24 —Å–æ–∞—Ç–¥–∞–≥–∏ –±–∞—Ä—á–∞ –∞—Ä–∏–∑–∞–ª–∞—Ä —Ä—û–π—Ö–∞—Ç–∏</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Operator Dashboard -->
            <div id="operator-dashboard" class="page">
                <div class="blur-background">
                    <h1 style="text-align: center; margin-bottom: 30px;">–û–ø–µ—Ä–∞—Ç–æ—Ä –ø–∞–Ω–µ–ª–∏</h1>
                    <p style="text-align: center; margin-bottom: 20px; opacity: 0.8;">–•—É—à –∫–µ–ª–∏–±—Å–∏–∑, <span id="operator-username"></span>!</p>
                    <p style="text-align: center; margin-bottom: 40px;">–¢–µ—Ö–Ω–∏–∫ —Ö–∏–∑–º–∞—Ç –∫—û—Ä—Å–∞—Ç–∏—à —É—á—É–Ω “õ—É—Ä–∏–ª–º–∞ —Ä–∞“õ–∞–º–∏–Ω–∏ —Ç–∞–Ω–ª–∞–Ω–≥:</p>
                    
                    <form id="request-form">
                        <input type="hidden" id="button-number">
                        <div class="grid-container">
                            <script>
                                for (let i = 1; i <= 68; i++) {
                                    document.write(`<div class="grid-item" data-number="${i}" onclick="sendRequest(${i})">${i}</div>`);
                                }
                            </script>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- User List -->
            <div id="user-list" class="page">
                <div class="blur-background">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                        <h1>–§–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏–ª–∞—Ä —Ä—û–π—Ö–∞—Ç–∏</h1>
                        <a href="#" onclick="showPage('add-user')" class="btn">+ –Ø–Ω–≥–∏ —Ñ–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏</a>
                    </div>
                    
                    <div class="user-list" id="users-container">
                        <!-- Users will be added here by JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- Add User -->
            <div id="add-user" class="page">
                <div class="blur-background" style="max-width: 600px; margin: 0 auto;">
                    <h1 style="text-align: center; margin-bottom: 30px;">–Ø–Ω–≥–∏ —Ñ–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏ “õ—û—à–∏—à</h1>
                    
                    <form onsubmit="addUser(event)">
                        <div class="form-group">
                            <label for="new-username">–õ–æ–≥–∏–Ω</label>
                            <input type="text" class="form-control" id="new-username" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="new-password">–ü–∞—Ä–æ–ª</label>
                            <input type="password" class="form-control" id="new-password" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="new-role">–†–æ–ª–∏</label>
                            <select class="form-control" id="new-role" required>
                                <option value="operator">–û–ø–µ—Ä–∞—Ç–æ—Ä</option>
                                <option value="mechanic">–ú–µ—Ö–∞–Ω–∏–∫</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="email-field">
                            <label for="new-email">Email (–º–µ—Ö–∞–Ω–∏–∫ —É—á—É–Ω)</label>
                            <input type="email" class="form-control" id="new-email">
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-top: 30px;">
                            <button type="submit" class="btn">“ö—û—à–∏—à</button>
                            <a href="#" onclick="showPage('user-list')" class="btn btn-secondary">–û—Ä—Ç–≥–∞ “õ–∞–π—Ç–∏—à</a>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Reports -->
            <div id="reports" class="page">
                <div class="blur-background">
                    <h1 style="text-align: center; margin-bottom: 30px;">–ö—É–Ω–ª–∏–∫ —Ö–∏—Å–æ–±–æ—Ç</h1>
                    <p style="text-align: center; margin-bottom: 40px; opacity: 0.8;">–û—Ö–∏—Ä–≥–∏ 24 —Å–æ–∞—Ç–¥–∞–≥–∏ –±–∞—Ä—á–∞ –∞—Ä–∏–∑–∞–ª–∞—Ä —Ä—û–π—Ö–∞—Ç–∏</p>
                    
                    <div class="user-list" id="reports-container">
                        <!-- Reports will be added here by JavaScript -->
                    </div>
                </div>
            </div>
        </main>
        
        <footer>
            Page creator: SR
        </footer>
    </div>
    
    <script>
        // Demo users data
        const demoUsers = [
            {id: 1, username: 'admin', password: 'admin123', role: 'admin', email: ''},
            {id: 2, username: 'operator1', password: 'op123', role: 'operator', email: ''},
            {id: 3, username: 'mechanic1', password: 'mech123', role: 'mechanic', email: 'mechanic1@example.com'}
        ];
        
        let users = [...demoUsers];
        let requests = [];
        
        // Page navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation menu based on current user
            updateNavMenu();
            
            // Load data for specific pages
            if (pageId === 'user-list') {
                loadUserList();
            } else if (pageId === 'reports') {
                loadReports();
            }
        }
        
        // Update navigation menu
        function updateNavMenu() {
            const navMenu = document.getElementById('nav-menu');
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (!currentUser) {
                navMenu.innerHTML = '<li><a href="#" onclick="showPage(\'login\')">–ö–∏—Ä–∏—à</a></li>';
                return;
            }
            
            let menuItems = `
                <li><a href="#" onclick="showPage('${currentUser.role === 'admin' ? 'admin-dashboard' : 'operator-dashboard'}')">–ê—Å–æ—Å–∏–π —Å–∞“≥–∏—Ñ–∞</a></li>
            `;
            
            if (currentUser.role === 'admin') {
                menuItems += `
                    <li><a href="#" onclick="showPage('user-list')">–§–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏–ª–∞—Ä</a></li>
                    <li><a href="#" onclick="showPage('reports')">–ö—É–Ω–ª–∏–∫ —Ö–∏—Å–æ–±–æ—Ç</a></li>
                `;
            }
            
            menuItems += '<li><a href="#" onclick="logout()" class="btn btn-secondary">–ß–∏“õ–∏—à</a></li>';
            
            navMenu.innerHTML = menuItems;
        }
        
        // Login function
        function login(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                if (user.role === 'admin') {
                    document.getElementById('admin-username').textContent = user.username;
                    showPage('admin-dashboard');
                } else if (user.role === 'operator') {
                    document.getElementById('operator-username').textContent = user.username;
                    showPage('operator-dashboard');
                }
                
                // Show success message
                alert('–ú—É–≤–∞—Ñ—Ñ–∞“õ–∏—è—Ç–ª–∏ –∫–∏—Ä–∏–ª–¥–∏!');
            } else {
                alert('–ù–æ—Ç—û“ì—Ä–∏ –ª–æ–≥–∏–Ω —ë–∫–∏ –ø–∞—Ä–æ–ª');
            }
        }
        
        // Logout function
        function logout() {
            localStorage.removeItem('currentUser');
            showPage('login');
        }
        
        // Send request (operator function)
        function sendRequest(buttonNumber) {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser && currentUser.role === 'operator') {
                const newRequest = {
                    id: requests.length + 1,
                    button_number: buttonNumber,
                    timestamp: new Date().toLocaleString(),
                    user_id: currentUser.id,
                    username: currentUser.username
                };
                
                requests.push(newRequest);
                alert(`“ö—É—Ä–∏–ª–º–∞ ‚Ññ${buttonNumber} —É—á—É–Ω —Å—û—Ä–æ–≤ –∂—û–Ω–∞—Ç–∏–ª–¥–∏!`);
                
                // In a real app, this would send an email to mechanics
                console.log(`Email sent to mechanics about device ${buttonNumber}`);
            }
        }
        
        // Load user list (admin function)
        function loadUserList() {
            const container = document.getElementById('users-container');
            container.innerHTML = '';
            
            users.forEach(user => {
                const userCard = document.createElement('div');
                userCard.className = 'user-card';
                userCard.innerHTML = `
                    <h2>${user.username}</h2>
                    <p><strong>–†–æ–ª–∏:</strong> ${user.role}</p>
                    <p><strong>–ü–∞—Ä–æ–ª:</strong> ${user.password}</p>
                    ${user.email ? `<p><strong>Email:</strong> ${user.email}</p>` : ''}
                    
                    <div class="user-actions">
                        <a href="#" onclick="editUser(${user.id})" class="btn btn-secondary">–é–∑–≥–∞—Ä—Ç–∏—Ä–∏—à</a>
                        <a href="#" onclick="deleteUser(${user.id})" class="btn btn-danger">–é—á–∏—Ä–∏—à</a>
                    </div>
                `;
                container.appendChild(userCard);
            });
        }
        
        // Add new user (admin function)
        function addUser(event) {
            event.preventDefault();
            const username = document.getElementById('new-username').value;
            const password = document.getElementById('new-password').value;
            const role = document.getElementById('new-role').value;
            const email = document.getElementById('new-email').value;
            
            const newUser = {
                id: users.length + 1,
                username,
                password,
                role,
                email: role === 'mechanic' ? email : ''
            };
            
            users.push(newUser);
            alert('–§–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏ –º—É–≤–∞—Ñ—Ñ–∞“õ–∏—è—Ç–ª–∏ “õ—û—à–∏–ª–¥–∏!');
            showPage('user-list');
        }
        
        // Edit user (placeholder - would need more implementation)
        function editUser(userId) {
            alert(`–§–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏ ${userId} —Ç–∞“≥—Ä–∏—Ä–ª–∞—à (–∞–º–∞–ª–≥–∞ –æ—à–∏—Ä–∏–ª–º–∞–≥–∞–Ω)`);
        }
        
        // Delete user
        function deleteUser(userId) {
            if (confirm('“≤–∞“õ–∏“õ–∞—Ç–∞–Ω “≥–∞–º —û—á–∏—Ä–º–æ“õ—á–∏–º–∏—Å–∏–∑?')) {
                users = users.filter(user => user.id !== userId);
                loadUserList();
                alert('–§–æ–π–¥–∞–ª–∞–Ω—É–≤—á–∏ —û—á–∏—Ä–∏–ª–¥–∏!');
            }
        }
        
        // Load reports (admin function)
        function loadReports() {
            const container = document.getElementById('reports-container');
            container.innerHTML = '';
            
            if (requests.length === 0) {
                container.innerHTML = `
                    <div class="blur-background" style="text-align: center; padding: 40px;">
                        <h3>“≤–æ–∑–∏—Ä—á–∞ –∞—Ä–∏–∑–∞–ª–∞—Ä –º–∞–≤–∂—É–¥ —ç–º–∞—Å</h3>
                    </div>
                `;
                return;
            }
            
            requests.forEach(req => {
                const reportCard = document.createElement('div');
                reportCard.className = 'user-card';
                reportCard.innerHTML = `
                    <h2>–ê—Ä–∏–∑–∞ ‚Ññ${req.id}</h2>
                    <p><strong>–û–ø–µ—Ä–∞—Ç–æ—Ä:</strong> ${req.username}</p>
                    <p><strong>“ö—É—Ä–∏–ª–º–∞ —Ä–∞“õ–∞–º–∏:</strong> ${req.button_number}</p>
                    <p><strong>–í–∞“õ—Ç:</strong> ${req.timestamp}</p>
                `;
                container.appendChild(reportCard);
            });
        }
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                if (currentUser.role === 'admin') {
                    document.getElementById('admin-username').textContent = currentUser.username;
                    showPage('admin-dashboard');
                } else if (currentUser.role === 'operator') {
                    document.getElementById('operator-username').textContent = currentUser.username;
                    showPage('operator-dashboard');
                }
            } else {
                showPage('login');
            }
            
            // Role selector change handler
            document.getElementById('new-role')?.addEventListener('change', function() {
                const emailField = document.getElementById('email-field');
                if (this.value === 'mechanic') {
                    emailField.style.display = 'block';
                    document.getElementById('new-email').setAttribute('required', '');
                } else {
                    emailField.style.display = 'none';
                    document.getElementById('new-email').removeAttribute('required');
                }
            });
        });
    </script>
</body>
</html>